{"ast":null,"code":"var _jsxFileName = \"/home/aswin/Desktop/Projects/chat-mern/chat-react/src/Components/ChatScreen/UpdateGroup.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport { ChatState } from '../../ChatProvideContext';\nimport { motion } from 'framer-motion';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction UpdateGroup() {\n  _s();\n\n  const variants = {\n    open: {\n      opacity: 0,\n      x: \"-100%\"\n    },\n    close: {\n      opacity: 1,\n      x: \"-0%\"\n    }\n  };\n  const [groupChatName, setGroupChatName] = useState();\n  const [renameloading, setRenameLoading] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [searchResult, setSearchResult] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const {\n    selectedChat,\n    setSelectedChat,\n    user,\n    fetching,\n    setFetching,\n    groupButton,\n    setGroupButton\n  } = ChatState();\n\n  const handleRename = async () => {\n    if (!groupChatName) return;\n\n    try {\n      setRenameLoading(true);\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.put(`/chat/rename`, {\n        chatId: selectedChat._id,\n        chatName: groupChatName\n      }, config);\n      console.log(data._id); // setSelectedChat(\"\");\n\n      setSelectedChat(data);\n      setFetching(!fetching);\n      setRenameLoading(false);\n    } catch (error) {\n      console.log('error occured');\n      setRenameLoading(false);\n    }\n\n    setGroupChatName(\"\");\n  };\n\n  const handleSearch = async query => {\n    setSearch(query);\n\n    if (!query) {\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.get(`/user?search=${search}`, config);\n      console.log(data);\n      setLoading(false);\n      setSearchResult(data);\n    } catch (error) {\n      console.log('error occured');\n      setLoading(false);\n    }\n  };\n\n  const handleAddUser = async user1 => {\n    if (selectedChat.users.find(u => u._id === user1._id)) {\n      console.log('user already in ');\n      return;\n    }\n\n    if (selectedChat.groupAdmin._id !== user._id) {\n      console.log('admin can only add');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.put(`/chat/groupadd`, {\n        chatId: selectedChat._id,\n        userId: user1._id\n      }, config);\n      setSelectedChat(data);\n      setFetching(!fetching);\n      setLoading(false);\n    } catch (error) {\n      console.log('error occured');\n      setLoading(false);\n    }\n\n    setGroupChatName(\"\");\n  };\n\n  const handleRemove = async user1 => {\n    if (selectedChat.groupAdmin._id !== user._id && user1._id !== user._id) {\n      console.log('only admins can remove');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.put(`/chat/groupremove`, {\n        chatId: selectedChat._id,\n        userId: user1._id\n      }, config);\n      user1._id === user._id ? setSelectedChat() : setSelectedChat(data);\n      setFetching(!fetching); //   fetchMessages();\n\n      setLoading(false);\n    } catch (error) {\n      console.log('error occured');\n      setLoading(false);\n    }\n\n    setGroupChatName(\"\");\n  };\n\n  console.log(groupButton);\n  return (\n    /*#__PURE__*/\n    // <motion.div \n    // animate={{x:0,opacity:1}} initial={{x:10,opacity:1}} exit={{x:30,opacity:0}} \n    // <div\n    // className={` z-50 bg-indigo-400 lg:p-10   h-full bottom-0 right-0   absolute\n    // ${groupButton ? \"translate-x-5\":\"translate-x-0\"} ease-in-out duration-75 \n    // `}>\n    _jsxDEV(\"div\", {\n      className: `top-0 right-0 absolute p-5 z-40 bg-indigo-800 h-full ease-in-out duration-300  ${groupButton ? \"translate-x-0 \" : \"translate-x-full opacity-0 \"}  `,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" h-full w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setGroupButton(false),\n          children: \"button\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full flex flex-row p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Gp Name\",\n            value: groupChatName,\n            onChange: e => setGroupChatName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRename,\n            children: \"change\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 peer relative \",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"peer\",\n            placeholder: \"add users\",\n            value: search,\n            onChange: e => handleSearch(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hidden absolute z-50  bg-lime-600 peer-hover:block\",\n            children: searchResult.map(u => /*#__PURE__*/_jsxDEV(\"p\", {\n              onClick: () => handleAddUser(u),\n              children: u.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 25\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"m-1  bg-slate-100 h-1/3 \",\n          children: selectedChat.users.map(u => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mx-1\",\n              children: u.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this), !(user.email === u.email) && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleRemove(u),\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bottom-0 fixed p-10 \",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }, this) // </motion.div>\n\n  );\n}\n\n_s(UpdateGroup, \"0PT+tSMjmTPmyJi/L0WN49fZl9E=\");\n\n_c = UpdateGroup;\nexport default UpdateGroup;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdateGroup\");","map":{"version":3,"sources":["/home/aswin/Desktop/Projects/chat-mern/chat-react/src/Components/ChatScreen/UpdateGroup.js"],"names":["axios","React","useState","ChatState","motion","UpdateGroup","variants","open","opacity","x","close","groupChatName","setGroupChatName","renameloading","setRenameLoading","search","setSearch","searchResult","setSearchResult","loading","setLoading","selectedChat","setSelectedChat","user","fetching","setFetching","groupButton","setGroupButton","handleRename","config","headers","Authorization","token","data","put","chatId","_id","chatName","console","log","error","handleSearch","query","get","handleAddUser","user1","users","find","u","groupAdmin","userId","handleRemove","e","target","value","map","email"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useState } from 'react'\nimport { ChatState } from '../../ChatProvideContext';\nimport {motion} from 'framer-motion';\n\n\nfunction UpdateGroup() {\n    const variants={\n        open:{opacity:0,x:\"-100%\"},\n        close:{opacity:1, x:\"-0%\"}\n    }\n    const [groupChatName, setGroupChatName] = useState();\n    const [renameloading, setRenameLoading] = useState(false);\n    const [search, setSearch] = useState(\"\");\n    const [searchResult, setSearchResult] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const { selectedChat, setSelectedChat,user,fetching,setFetching,groupButton,setGroupButton } = ChatState();\n    const handleRename = async () => {\n        if (!groupChatName) return;\n    \n        try {\n          setRenameLoading(true);\n          const config = {\n            headers: {\n              Authorization: `Bearer ${user.token}`,\n            },\n          };\n          const { data } = await axios.put(\n            `/chat/rename`,\n            {\n              chatId: selectedChat._id,\n              chatName: groupChatName,\n            },\n            config\n          );\n    \n          console.log(data._id);\n          // setSelectedChat(\"\");\n          setSelectedChat(data);\n          setFetching(!fetching);\n          setRenameLoading(false);\n        } catch (error) {\n          console.log('error occured');\n          setRenameLoading(false);\n        }\n        setGroupChatName(\"\");\n      };\n\n      const handleSearch = async (query) => {\n        setSearch(query);\n        if (!query) {\n          return;\n        }\n        try {\n          setLoading(true);\n          const config = {\n            headers: {\n              Authorization: `Bearer ${user.token}`,\n            },\n          };\n          const { data } = await axios.get(`/user?search=${search}`, config);\n          console.log(data);\n          setLoading(false);\n          setSearchResult(data);\n        } catch (error) {\n          console.log('error occured');\n          setLoading(false);\n        }\n      }\n      const handleAddUser = async (user1) => {\n        if (selectedChat.users.find((u) => u._id === user1._id)) {\n          console.log('user already in ');\n          return;\n        }\n        if (selectedChat.groupAdmin._id !== user._id) {\n          console.log('admin can only add');\n          return;\n        }\n    \n        try {\n          setLoading(true);\n          const config = {\n            headers: {\n              Authorization: `Bearer ${user.token}`,\n            },\n          };\n          const { data } = await axios.put(\n            `/chat/groupadd`,\n            {\n              chatId: selectedChat._id,\n              userId: user1._id,\n            },\n            config\n          );\n    \n          setSelectedChat(data);\n          setFetching(!fetching);\n          setLoading(false);\n        } catch (error) {\n         console.log('error occured');\n          setLoading(false);\n        }\n        setGroupChatName(\"\");\n      };\n\n      const handleRemove = async (user1) => {\n        if (selectedChat.groupAdmin._id !== user._id && user1._id !== user._id) {\n          console.log('only admins can remove');\n          return;\n        }\n    \n        try {\n          setLoading(true);\n          const config = {\n            headers: {\n              Authorization: `Bearer ${user.token}`,\n            },\n          };\n          const { data } = await axios.put(\n            `/chat/groupremove`,\n            {\n              chatId: selectedChat._id,\n              userId: user1._id,\n            },\n            config\n          );\n    \n          user1._id === user._id ? setSelectedChat() : setSelectedChat(data);\n          setFetching(!fetching);\n        //   fetchMessages();\n          setLoading(false);\n        } catch (error) {\n          console.log('error occured');\n          setLoading(false);\n        }\n        setGroupChatName(\"\");\n      }\n      console.log(groupButton);\n      \n    return (\n        // <motion.div \n        // animate={{x:0,opacity:1}} initial={{x:10,opacity:1}} exit={{x:30,opacity:0}} \n        // <div\n        // className={` z-50 bg-indigo-400 lg:p-10   h-full bottom-0 right-0   absolute\n        // ${groupButton ? \"translate-x-5\":\"translate-x-0\"} ease-in-out duration-75 \n        // `}>\n        <div className={`top-0 right-0 absolute p-5 z-40 bg-indigo-800 h-full ease-in-out duration-300  ${groupButton ? \"translate-x-0 \" : \"translate-x-full opacity-0 \"}  `}>\n\n            <div className=\" h-full w-full\">\n                <button onClick={() =>setGroupButton(false)}>button</button>\n                <div className=\"w-full flex flex-row p-4\">\n                    \n              \n                    <input type=\"text\" placeholder=\"Gp Name\"value={groupChatName}\n                    onChange={(e) => setGroupChatName(e.target.value)} />\n                    <button onClick={handleRename}>change</button>\n                \n                </div>\n                <div className='p-4 peer relative '>\n                    <input type=\"text\" className=\"peer\" placeholder=\"add users\"\n                    value={search}\n                     onChange={(e) => handleSearch(e.target.value)} />                    \n                <div className=\"hidden absolute z-50  bg-lime-600 peer-hover:block\">\n                    {searchResult.map(u=>(\n                        <p onClick={() =>handleAddUser(u)}>{u.email}</p>\n                    ))}\n                </div>\n                </div> \n\n                <div className=\"m-1  bg-slate-100 h-1/3 \">\n                    {selectedChat.users.map(u=>(\n                        <div className=\"flex flex-row\">\n                            <p className=\"mx-1\">{u.email}</p>\n                            {!(user.email===u.email) &&\n                            <button onClick={()=>handleRemove(u)}>X</button>}\n                        </div>\n                    ))}\n\n                </div>\n                \n                \n                <div className='bottom-0 fixed p-10 '>\n                    <button>remove</button>\n                </div>\n            </div>\n        </div>\n        // </motion.div>\n\n    )\n}\n\nexport default UpdateGroup\n"]},"metadata":{},"sourceType":"module"}